{"version":3,"sources":["../src/index.ts","../src/schema.json"],"sourcesContent":["import { Ajv } from \"ajv\";\n\nimport schema from \"./schema.json\" with { type: \"json\" };\n\nexport * from \"./schema.generated\";\n\nconst ajv = new Ajv();\najv.addFormat(\n  \"uri\",\n  /^(https?:\\/\\/)?([\\da-z-]+\\.)+([a-z]{2,6})([/\\w .-]*)*\\/?$/i,\n);\n\nexport function validateManifest(data: unknown): boolean {\n  console.log(\"[*] Validating manifest data\");\n  const validate = ajv.compile(schema);\n  const valid = validate(data);\n  if (!valid) {\n    console.log(`[-] Errors: ${JSON.stringify(validate.errors, null, 2)}`);\n    return false;\n  }\n  return true;\n}\n","{\n  \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n  \"title\": \"Schema\",\n  \"allOf\": [\n    {\n      \"$ref\": \"#/definitions/Manifest\"\n    }\n  ],\n  \"definitions\": {\n    \"Manifest\": {\n      \"type\": \"object\",\n      \"required\": [\n        \"id\",\n        \"plugins\",\n        \"version\"\n      ],\n      \"properties\": {\n        \"author\": {\n          \"anyOf\": [\n            {\n              \"$ref\": \"#/definitions/ManifestAuthor\"\n            },\n            {\n              \"type\": \"null\"\n            }\n          ]\n        },\n        \"description\": {\n          \"type\": [\n            \"string\",\n            \"null\"\n          ]\n        },\n        \"id\": {\n          \"$ref\": \"#/definitions/ManifestID\"\n        },\n        \"links\": {\n          \"anyOf\": [\n            {\n              \"$ref\": \"#/definitions/ManifestLinks\"\n            },\n            {\n              \"type\": \"null\"\n            }\n          ]\n        },\n        \"name\": {\n          \"type\": [\n            \"string\",\n            \"null\"\n          ]\n        },\n        \"plugins\": {\n          \"type\": \"array\",\n          \"items\": {\n            \"$ref\": \"#/definitions/ManifestPlugin\"\n          }\n        },\n        \"version\": {\n          \"type\": \"string\"\n        }\n      }\n    },\n    \"ManifestAuthor\": {\n      \"type\": \"object\",\n      \"properties\": {\n        \"email\": {\n          \"type\": [\n            \"string\",\n            \"null\"\n          ]\n        },\n        \"name\": {\n          \"type\": [\n            \"string\",\n            \"null\"\n          ]\n        },\n        \"url\": {\n          \"type\": [\n            \"string\",\n            \"null\"\n          ],\n          \"format\": \"uri\"\n        }\n      }\n    },\n    \"ManifestBackendPluginRuntime\": {\n      \"type\": \"string\",\n      \"enum\": [\n        \"javascript\"\n      ]\n    },\n    \"ManifestFrontendPluginConnection\": {\n      \"type\": \"object\",\n      \"required\": [\n        \"id\"\n      ],\n      \"properties\": {\n        \"id\": {\n          \"$ref\": \"#/definitions/ManifestID\"\n        }\n      }\n    },\n    \"ManifestID\": {\n      \"type\": \"string\"\n    },\n    \"ManifestLinks\": {\n      \"type\": \"object\",\n      \"properties\": {\n        \"sponsor\": {\n          \"type\": [\n            \"string\",\n            \"null\"\n          ],\n          \"format\": \"uri\"\n        }\n      }\n    },\n    \"ManifestPlugin\": {\n      \"oneOf\": [\n        {\n          \"type\": \"object\",\n          \"required\": [\n            \"id\",\n            \"kind\"\n          ],\n          \"properties\": {\n            \"assets\": {\n              \"type\": [\n                \"string\",\n                \"null\"\n              ]\n            },\n            \"backend\": {\n              \"anyOf\": [\n                {\n                  \"$ref\": \"#/definitions/ManifestFrontendPluginConnection\"\n                },\n                {\n                  \"type\": \"null\"\n                }\n              ]\n            },\n            \"entrypoint\": {\n              \"type\": [\n                \"string\",\n                \"null\"\n              ]\n            },\n            \"id\": {\n              \"$ref\": \"#/definitions/ManifestID\"\n            },\n            \"kind\": {\n              \"type\": \"string\",\n              \"enum\": [\n                \"frontend\"\n              ]\n            },\n            \"name\": {\n              \"type\": [\n                \"string\",\n                \"null\"\n              ]\n            },\n            \"style\": {\n              \"type\": [\n                \"string\",\n                \"null\"\n              ]\n            }\n          }\n        },\n        {\n          \"type\": \"object\",\n          \"required\": [\n            \"entrypoint\",\n            \"id\",\n            \"kind\",\n            \"runtime\"\n          ],\n          \"properties\": {\n            \"assets\": {\n              \"type\": [\n                \"string\",\n                \"null\"\n              ]\n            },\n            \"entrypoint\": {\n              \"type\": \"string\"\n            },\n            \"id\": {\n              \"$ref\": \"#/definitions/ManifestID\"\n            },\n            \"kind\": {\n              \"type\": \"string\",\n              \"enum\": [\n                \"backend\"\n              ]\n            },\n            \"name\": {\n              \"type\": [\n                \"string\",\n                \"null\"\n              ]\n            },\n            \"runtime\": {\n              \"$ref\": \"#/definitions/ManifestBackendPluginRuntime\"\n            }\n          }\n        },\n        {\n          \"type\": \"object\",\n          \"required\": [\n            \"definition\",\n            \"id\",\n            \"kind\"\n          ],\n          \"properties\": {\n            \"definition\": {\n              \"type\": \"string\"\n            },\n            \"id\": {\n              \"$ref\": \"#/definitions/ManifestID\"\n            },\n            \"kind\": {\n              \"type\": \"string\",\n              \"enum\": [\n                \"workflow\"\n              ]\n            },\n            \"name\": {\n              \"type\": [\n                \"string\",\n                \"null\"\n              ]\n            }\n          }\n        }\n      ]\n    }\n  }\n}\n"],"mappings":"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","names":[]}